{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2019/03/20/redirecting-_internal-for-a-large-uf-deployment/",
    "result": {"data":{"site":{"siteMetadata":{"title":"RFaircloth Data Nerd"}},"markdownRemark":{"id":"d6342c43-5f14-5ede-8672-ce51e13c2977","excerpt":"Sometimes it is not noticed because there is no license charge associated with Splunk’s Universal forwarder internal logs and in some cases heavy forwarders. In…","html":"<p>Sometimes it is not noticed because there is no license charge associated with Splunk’s Universal forwarder internal logs and in some cases heavy forwarders. In very large deployments this can be a significant portion of storage used per day. Do you really need to keep those events around as long as the events associated with the Splunk Enterprise instances probably not.</p>\n<h2>License Warning – Updated</h2>\n<p>It has been pointed out this change WILL impact license on recent versions of Splunk in older versions and customers with EAA agreements in place this is OK. If you are on a recent (not sure which version) this change will impact license.</p>\n<h2>Warning!</h2>\n<p>The following changes will disable the Splunk Monitoring consoles built in forwarder monitoring feature. You can customize the searches but be aware this is not upgrade safe.</p>\n<h2>Second Warning!</h2>\n<p>If you have any custom forwarder monitoring searches/dashboards/alerts they may be impacted.</p>\n<h2>Define an index</h2>\n<p>The index we need to define is _internal_forwarder the following sample configuration will allow us to keep about 3 days of data from our forwarders adjust according to need.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;pre class=\"wp-block-code\">```\n[_internal_forwarder]\nmaxWarmDBCount = 200\nfrozenTimePeriodInSecs = 259200\nquarantinePastSecs = 459200\nhomePath = $SPLUNK_DB/$_index_name/db\ncoldPath = $SPLUNK_DB/$_index_name/colddb\nthawedPath = $SPLUNK_DB/$_index_name/thaweddb\nmaxHotSpanSecs = 43200\nmaxHotBuckets = 10</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\nChange the index for internal logs\n----------------------------------\n\nWe need to create a new “TA” named “Splunk\\_TA\\_splunkforwarder we will CAREFULLY use the DS to push this to forwarders only. DO NOT push this to any Splunk Enterprise instance (CM/LM/MC/SH/IDX/deployer/ds) but you may push this to a “heavy” or intermediate forwarder. The app only needs two files in default app.conf and inputs.conf\n</code></pre></div>\n<pre class=\"wp-block-code\">```\n#app.conf\n[install]\nstate_change_requires_restart = true\nis_configured = 0\nstate = enabled\nbuild = 2\n\n[launcher]\nauthor = Ryan Faircloth\nversion = 1.0.0\n\n[ui]\nis_visible = 0\nlabel = Splunk_UF Inputs\n\n[package]\nid = Splunk_TA_splunkforwarder\n```\n```\n\n```\n<pre class=\"wp-block-code\">```\n#inputs.conf\n[monitor://$SPLUNK_HOME/var/log/splunk]\nindex = _internal_forwarder\n```\n```\n\nCheck our Work\n--------------\n\nFirst lets check positive make sure UFs have moved to the new index, we should get results.\n\n```\n<pre class=\"wp-block-code\">```\nindex=_internal_forwarder source=*splunkforwarder*\n```\n```\n\nSecond lets check the negative make sure only UF logs got moved we should get no results\n\n```\n<pre class=\"wp-block-code\">```\nindex= _internal_forwarder source=*splunk* NOT source=*splunkforwarder*\n```\n```\n\nUpdates\n-------\n\n- Index definition example used “\\_internal” rather than “\\_internal\\_uf”\n- renamed app to “Splunk\\_TA\\_splunkforwarder\n- renamed index to \\_internal\\_forwarder\n","frontmatter":{"title":"Redirecting _internal for a large forwarder deployment","date":"March 21, 2019","description":null}},"previous":{"fields":{"slug":"/2019/03/08/windows-ta-6-0-is-out/"},"frontmatter":{"title":"Windows TA 6.0 is out!"}},"next":{"fields":{"slug":"/2019/03/22/seckit-for-splunk-ta-windows-is-out/"},"frontmatter":{"title":"SecKit for Splunk TA Windows is out"}}},"pageContext":{"id":"d6342c43-5f14-5ede-8672-ce51e13c2977","previousPostId":"05fe743b-69bf-53aa-abdc-daa28950037e","nextPostId":"93f4517f-6472-569b-962b-f4cd546aa8ea"}},
    "staticQueryHashes": ["2841359383","3257411868"]}